## Введение

Методика **Grey-box** сочетает в себе подходы Black-box (тестирование интерфейса) и White-box (частичное знание внутренней структуры системы). В рамках этого задания тестировщику доступна **база данных магазинов**, что позволяет расширить область тестирования и проверить соответствие между UI и данными на сервере.

---

## Предпосылки

- Имеется доступ к базе данных магазинов с полями: `id`, `name`, `type`, `coordinates`, `is_active`.
- Предполагается, что отображаются только магазины с `is_active = true`.

---

## Чек-лист тестирования

### 1. Поле ввода названия магазина (SC21-01)

| ID   | Проверка                                                           | Ожидаемый результат                                                 |
| ---- | ------------------------------------------------------------------ | ------------------------------------------------------------------- |
| G1.1 | Ввести название магазина, которое точно есть в БД (`name` из базы) | Отображается флажок на карте соответствующего магазина              |
| G1.2 | Ввести название магазина, которого нет в БД                        | Отображается сообщение об отсутствии результатов                    |
| G1.3 | Ввести название магазина с разным регистром букв                   | Поиск нечувствителен к регистру (если указано в ТЗ или реализовано) |
| G1.4 | Ввести только первые 2 символа названия магазина из БД             | Совпадения отображаются (если работает автопоиск/частичный поиск)   |

---

### 2. Поле выбора типа магазина (SC21-02)

| ID   | Проверка                                                      | Ожидаемый результат                                             |
| ---- | ------------------------------------------------------------- | --------------------------------------------------------------- |
| G2.1 | Выбрать тип магазина (например, «Аптеки»)                     | Отображаются флажки всех активных магазинов с `type = "Аптеки"` |
| G2.2 | В БД нет магазинов с выбранным типом                          | На карте ничего не отображается, выводится сообщение            |
| G2.3 | В БД есть магазины с нужным типом, но `is_active = false`     | Магазины **не отображаются**                                    |
| G2.4 | Сопоставить количество флажков на карте с числом записей в БД | Количество совпадает (учитываются только `is_active = true`)    |

---

### 3. Кнопка «Поиск» и результаты (SC21-03)

| ID   | Проверка                                                  | Ожидаемый результат                                                            |
| ---- | --------------------------------------------------------- | ------------------------------------------------------------------------------ |
| G3.1 | Выполнить поиск по магазину и проверить координаты флажка | Совпадают с координатами в БД                                                  |
| G3.2 | Поиск по типу и проверка координат всех флажков           | Все координаты соответствуют данным в базе                                     |
| G3.3 | Поиск магазина с пустыми координатами в БД                | Такой магазин не отображается / возникает ошибка (в зависимости от реализации) |

---

### 4. Построение маршрута (SC21-04, SC21-05)

| ID   | Проверка                                                               | Ожидаемый результат                                                |
| ---- | ---------------------------------------------------------------------- | ------------------------------------------------------------------ |
| G4.1 | Построить маршрут до магазина с корректными координатами из БД         | Маршрут отображается, финишная точка совпадает с координатами      |
| G4.2 | Попробовать построить маршрут до магазина с некорректными координатами | Ошибка маршрута / отказ в построении маршрута                      |
| G4.3 | Построить маршрут до ближайшего магазина по типу                       | Выбирается ближайший магазин по `coordinates`, `type`, `is_active` |
| G4.4 | Проверить, что маршрут не строится до магазинов с `is_active = false`  | Не отображаются, маршруты не строятся                              |

---

### 5. Общие проверки (SC21-06)

| ID   | Проверка                                                    | Ожидаемый результат                                                               |
| ---- | ----------------------------------------------------------- | --------------------------------------------------------------------------------- |
| G5.1 | Закрыть приложение при активном маршруте и повторно открыть | Маршрут восстанавливается, данные берутся из последнего выбора (и координат в БД) |
| G5.2 | Изменить данные магазина в БД (например, поменять `type`)   | После нового поиска магазин отображается по обновлённому типу                     |
| G5.3 | Деактивировать магазин (`is_active = false`)                | После перезапуска или нового поиска магазин больше не отображается                |

---
